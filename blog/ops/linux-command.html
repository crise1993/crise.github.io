<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端必备linux知识，看这一篇就够了~ | crise&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="./assets/logo.png">
    <meta name="description" content="一名程序员/前端人的技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.1cd9ab6a.css" as="style"><link rel="preload" href="/assets/js/app.9120daf7.js" as="script"><link rel="preload" href="/assets/js/2.a6e094ff.js" as="script"><link rel="preload" href="/assets/js/27.3693eee6.js" as="script"><link rel="prefetch" href="/assets/js/10.d9b6c9f9.js"><link rel="prefetch" href="/assets/js/11.0c6ce840.js"><link rel="prefetch" href="/assets/js/12.a569ee67.js"><link rel="prefetch" href="/assets/js/13.241e980e.js"><link rel="prefetch" href="/assets/js/14.6926c1c5.js"><link rel="prefetch" href="/assets/js/15.be6a274d.js"><link rel="prefetch" href="/assets/js/16.0b9d8c28.js"><link rel="prefetch" href="/assets/js/17.45f356c9.js"><link rel="prefetch" href="/assets/js/18.5e50c60e.js"><link rel="prefetch" href="/assets/js/19.d739307b.js"><link rel="prefetch" href="/assets/js/20.03fd2cc0.js"><link rel="prefetch" href="/assets/js/21.5f1ef20a.js"><link rel="prefetch" href="/assets/js/22.5864a5a2.js"><link rel="prefetch" href="/assets/js/23.a0cc2704.js"><link rel="prefetch" href="/assets/js/24.69403470.js"><link rel="prefetch" href="/assets/js/25.275403bb.js"><link rel="prefetch" href="/assets/js/26.b1286bc4.js"><link rel="prefetch" href="/assets/js/28.fc3366b7.js"><link rel="prefetch" href="/assets/js/29.21f2e63a.js"><link rel="prefetch" href="/assets/js/3.f3817cd8.js"><link rel="prefetch" href="/assets/js/30.8caa22a5.js"><link rel="prefetch" href="/assets/js/31.f50f5254.js"><link rel="prefetch" href="/assets/js/32.90a406de.js"><link rel="prefetch" href="/assets/js/33.deb5b238.js"><link rel="prefetch" href="/assets/js/34.07b65d54.js"><link rel="prefetch" href="/assets/js/35.8af4d320.js"><link rel="prefetch" href="/assets/js/36.5efae40e.js"><link rel="prefetch" href="/assets/js/37.06625c30.js"><link rel="prefetch" href="/assets/js/38.8b134306.js"><link rel="prefetch" href="/assets/js/39.02668970.js"><link rel="prefetch" href="/assets/js/4.9b118658.js"><link rel="prefetch" href="/assets/js/40.a27fd44a.js"><link rel="prefetch" href="/assets/js/41.47ba2003.js"><link rel="prefetch" href="/assets/js/42.ea8fb56c.js"><link rel="prefetch" href="/assets/js/43.10454bb8.js"><link rel="prefetch" href="/assets/js/44.530dcfdd.js"><link rel="prefetch" href="/assets/js/45.d6b0fddd.js"><link rel="prefetch" href="/assets/js/46.d00976be.js"><link rel="prefetch" href="/assets/js/47.f7ddf21d.js"><link rel="prefetch" href="/assets/js/48.8e0f5c0b.js"><link rel="prefetch" href="/assets/js/49.db4b8f3a.js"><link rel="prefetch" href="/assets/js/5.3fc413d1.js"><link rel="prefetch" href="/assets/js/50.3d9e2fd6.js"><link rel="prefetch" href="/assets/js/51.7e919ad6.js"><link rel="prefetch" href="/assets/js/52.cc8a9467.js"><link rel="prefetch" href="/assets/js/53.27bab2ed.js"><link rel="prefetch" href="/assets/js/54.7b4fb7b1.js"><link rel="prefetch" href="/assets/js/55.b0e7b8e7.js"><link rel="prefetch" href="/assets/js/56.50b150de.js"><link rel="prefetch" href="/assets/js/57.fcb73728.js"><link rel="prefetch" href="/assets/js/58.63e48b57.js"><link rel="prefetch" href="/assets/js/59.01ea8047.js"><link rel="prefetch" href="/assets/js/6.a0219e38.js"><link rel="prefetch" href="/assets/js/60.f61f9001.js"><link rel="prefetch" href="/assets/js/61.6f01a24f.js"><link rel="prefetch" href="/assets/js/62.34e0934b.js"><link rel="prefetch" href="/assets/js/63.628b798d.js"><link rel="prefetch" href="/assets/js/64.bee0e2cb.js"><link rel="prefetch" href="/assets/js/65.f1998917.js"><link rel="prefetch" href="/assets/js/66.44307c2a.js"><link rel="prefetch" href="/assets/js/67.8a468a11.js"><link rel="prefetch" href="/assets/js/68.b746e204.js"><link rel="prefetch" href="/assets/js/69.ddd22bf9.js"><link rel="prefetch" href="/assets/js/7.6c6e1e69.js"><link rel="prefetch" href="/assets/js/70.d34188c1.js"><link rel="prefetch" href="/assets/js/71.b791990a.js"><link rel="prefetch" href="/assets/js/72.e027f464.js"><link rel="prefetch" href="/assets/js/73.5be25235.js"><link rel="prefetch" href="/assets/js/74.948d9afc.js"><link rel="prefetch" href="/assets/js/75.0088160a.js"><link rel="prefetch" href="/assets/js/76.38e00a2e.js"><link rel="prefetch" href="/assets/js/8.9f6f4f79.js"><link rel="prefetch" href="/assets/js/9.abcfea03.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1cd9ab6a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">crise's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  微博
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>web跨端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>框架及原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>运维相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/ops/no-secret-landing.html" class="sidebar-link">ssh免密登陆及原理</a></li><li><a href="/blog/ops/linux-deploy.html" class="sidebar-link">服务器部署node项目，看这一篇就够了</a></li><li><a href="/blog/ops/linux-ci-cd.html" class="sidebar-link">项目CI/CD持续集成部署方案，看这一篇就够了</a></li><li><a href="/blog/ops/linux-command.html" aria-current="page" class="active sidebar-link">前端必备linux知识，看这一篇就够了~</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#一、linux简介" class="sidebar-link">一、linux简介</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#二、linux文件系统" class="sidebar-link">二、linux文件系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_2-1-文件系统简介" class="sidebar-link">2.1 文件系统简介</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_2-2-文件类型" class="sidebar-link">2.2 文件类型</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_2-3-目录结构" class="sidebar-link">2.3 目录结构</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#三、linux用户管理及文件权限" class="sidebar-link">三、linux用户管理及文件权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_3-1-用户-用户组" class="sidebar-link">3.1 用户/用户组</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_3-2-相关命令" class="sidebar-link">3.2 相关命令</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_3-3-文件权限" class="sidebar-link">3.3 文件权限</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_3-4-修改文件权限相关命令" class="sidebar-link">3.4 修改文件权限相关命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#四、linux基本命令" class="sidebar-link">四、linux基本命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_4-1-部署前命令" class="sidebar-link">4.1 部署前命令</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_4-2-部署阶段命令" class="sidebar-link">4.2 部署阶段命令</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_4-3-问题调试排查阶段命令" class="sidebar-link">4.3 问题调试排查阶段命令</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_4-4-其他常用命令" class="sidebar-link">4.4 其他常用命令</a></li><li class="sidebar-sub-header"><a href="/blog/ops/linux-command.html#_4-5-vim编辑器相关指令" class="sidebar-link">4.5 vim编辑器相关指令</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端必备linux知识-看这一篇就够了"><a href="#前端必备linux知识-看这一篇就够了" class="header-anchor">#</a> 前端必备linux知识，看这一篇就够了~</h1> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>本文并不是一份完整的<code>Linux</code>实用命令指南，如果你的预期是这样的，那这篇文章可能得要让你失望了。</p> <p>主要针对前端群体，围绕<code>服务器部署</code>、<code>调试</code>、以及<code>后续维护</code>、<code>问题排查</code>等一系列过程中涉及到的linux基础知识来展开，旨在帮助他们在没有成熟的工具或平台的情况下，搞定前端项目或者node服务的部署。</p> <h2 id="一、linux简介"><a href="#一、linux简介" class="header-anchor">#</a> 一、linux简介</h2> <p>操作系统分内核与外壳，我们可以把外壳理解成围绕着内核的应用程序，内核就是能操作硬件的程序，内核建立了计算机软件与硬件之间通讯的平台，给外壳提供操作硬件的接口，提供系统服务，比如文件管理、虚拟内存、设备I/O等。</p> <p>Linux是一套免费使用和自由传播的类Unix操作系统，市面上存在着许多不同的Linux发行版本，比如：<code>CentOS</code>、<code>ubuntu</code>、<code>redhat</code>、<code>debian</code>等，它们都使用了 <code>Linux内核</code> 。Linux操作系统可广泛安装在各种计算机硬件设备中，比如手机、平板电脑、路由器、视频游戏控制台、台式计算机、大型机和超级计算机。</p> <h2 id="二、linux文件系统"><a href="#二、linux文件系统" class="header-anchor">#</a> 二、linux文件系统</h2> <h3 id="_2-1-文件系统简介"><a href="#_2-1-文件系统简介" class="header-anchor">#</a> 2.1 文件系统简介</h3> <p>在Linux操作系统中，所有被操作系统管理的资源，例如<code>网络接口卡</code>、<code>磁盘驱动器</code>、<code>打印机</code>、<code>输入输出设备</code>、<code>普通文件或目录</code>都被看作是一个文件。</p> <p>也就是说在LINUX系统中有一个重要的概念：<code>一切都是文件</code>。其实这是UNIX哲学的一个体现，而Linux是重写UNIX而来，所以这个概念也就传承了下来。</p> <p>在UNIX系统中，把一切资源都看作是文件，包括硬件设备。UNIX系统把每个硬件都看成是一个文件，通常称为设备文件，这样用户就可以用读写文件的方式实现对硬件的访问。</p> <h3 id="_2-2-文件类型"><a href="#_2-2-文件类型" class="header-anchor">#</a> 2.2 文件类型</h3> <table><thead><tr><th style="text-align:center;">文件类型</th> <th style="text-align:center;">字符标识</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">示例</th></tr></thead> <tbody><tr><td style="text-align:center;">普通文件</td> <td style="text-align:center;">-</td> <td style="text-align:center;">分为纯文本文件(ASCII)、二进制文件(binary)、数据格式的文件(data)、各种压缩文件</td> <td style="text-align:center;">包含程序源代码、可执行程序、图形文件、数据文件、文档文件、声音文件</td></tr> <tr><td style="text-align:center;">目录文件</td> <td style="text-align:center;">d</td> <td style="text-align:center;">用于存放文件名以及其相关信息的文件，可以包含下一级文件目录或者普通文件</td> <td style="text-align:center;">/root、/home等</td></tr> <tr><td style="text-align:center;">链接文件</td> <td style="text-align:center;">l</td> <td style="text-align:center;">一种特殊文件，指向一个真实存在的文件链接，用于不同目录下文件的共享，分为软链接和硬链接</td> <td style="text-align:center;"><code>node_modules</code>目录下npm包路径下文件为链接文件（软连接），真实文件地址指向<code>.pnpm目录</code>下的同名npm包文件地址</td></tr> <tr><td style="text-align:center;">块设备文件</td> <td style="text-align:center;">b</td> <td style="text-align:center;">存储数据以供系统存取的接口设备</td> <td style="text-align:center;">硬盘</td></tr> <tr><td style="text-align:center;">字符设备文件</td> <td style="text-align:center;">c</td> <td style="text-align:center;">串行端口的接口设备</td> <td style="text-align:center;">鼠标、键盘、光驱、打印机等</td></tr> <tr><td style="text-align:center;">管道文件（FIFO）</td> <td style="text-align:center;">p</td> <td style="text-align:center;">特殊类型文件，主要用于不同进程的信息通信</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">套接字文件</td> <td style="text-align:center;">s</td> <td style="text-align:center;">这类文件通常用在网络数据连接。可以启动一个程序来监听客户端的要求，客户端就可以通过套接字来进行数据通信</td> <td style="text-align:center;"></td></tr></tbody></table> <p>查看文件类型的三种方法：</p> <p>① <code>ls -l</code> 或者 <code>ll</code>  [ <code>ls -l</code> 列出文件及目录的详细信息]</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost log<span class="token punctuation">]</span><span class="token comment"># ls -l</span>
-rw-r--r--@   <span class="token number">1</span> crise  staff       <span class="token number">18365</span>  <span class="token number">6</span> <span class="token number">15</span>  <span class="token number">2021</span> xxx.png
lrwxr-xr-x     <span class="token number">1</span> root  wheel     <span class="token number">25</span> <span class="token number">12</span> <span class="token number">14</span>  <span class="token number">2020</span> X11 -<span class="token operator">&gt;</span> <span class="token punctuation">..</span>/private/var/select/X11
drwxr-xr-x  <span class="token number">1014</span> root  wheel  <span class="token number">32448</span> <span class="token number">12</span> <span class="token number">14</span>  <span class="token number">2020</span> <span class="token builtin class-name">test</span>
</code></pre></div><p>第一个字符代表文件类型</p> <p>② <code>file</code> 命令  [用于识别文件的类型]</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost data<span class="token punctuation">]</span><span class="token comment"># file a.txt </span>
a.txt: ASCII text
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># file Documents</span>
Documents: directory
</code></pre></div><p>③ <code>stat</code> 命令  [查看文件的详细属性（其中包括文件时间属性）]</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@localhost data<span class="token punctuation">]</span><span class="token comment"># stat a.txt</span>
  File: `a.txt'
  Size: <span class="token number">3</span>               Blocks: <span class="token number">8</span>          IO Block: <span class="token number">4096</span>   regular <span class="token function">file</span>
Device: 803h/2051d      Inode: <span class="token number">544365</span>      Links: <span class="token number">1</span>
Access: <span class="token punctuation">(</span>0644/-rw-r--r--<span class="token punctuation">)</span>  Uid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>   Gid: <span class="token punctuation">(</span>    <span class="token number">0</span>/    root<span class="token punctuation">)</span>
Access: <span class="token number">2018</span>-01-28 <span class="token number">20</span>:56:01.965885036 +0800
Modify: <span class="token number">2018</span>-01-28 <span class="token number">20</span>:55:27.181876154 +0800
Change: <span class="token number">2018</span>-01-28 <span class="token number">20</span>:55:27.181876154 +0800
</code></pre></div><h3 id="_2-3-目录结构"><a href="#_2-3-目录结构" class="header-anchor">#</a> 2.3 目录结构</h3> <p>Linux文件系统的结构层次鲜明，就像一棵倒立的树，最顶层是其根目录<code>/</code>：
<img src="https://www.runoob.com/wp-content/uploads/2014/06/d0c50-linux2bfile2bsystem2bhierarchy.jpg" alt="文件目录">
常见目录说明：</p> <table><thead><tr><th style="text-align:center;">目录名称</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">/bin</td> <td style="text-align:center;">存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里</td></tr> <tr><td style="text-align:center;">/boot</td> <td style="text-align:center;">这里存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件</td></tr> <tr><td style="text-align:center;">/dev</td> <td style="text-align:center;">用于存放设备文件</td></tr> <tr><td style="text-align:center;">/etc</td> <td style="text-align:center;">存放系统管理所需要的配置文件和子目录</td></tr> <tr><td style="text-align:center;">/home</td> <td style="text-align:center;">用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的，比如用户user的主目录就是/home/user，可以用~user表示</td></tr> <tr><td style="text-align:center;">/root</td> <td style="text-align:center;">超级用户（系统管理员）的主目录（特权阶级^o</td></tr> <tr><td style="text-align:center;">/sbin</td> <td style="text-align:center;">存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如ifconfig等</td></tr> <tr><td style="text-align:center;">/tmp</td> <td style="text-align:center;">用于存放各种临时文件，是公用的临时文件存储点</td></tr> <tr><td style="text-align:center;">/usr</td> <td style="text-align:center;">用于存放系统应用程序</td></tr> <tr><td style="text-align:center;">/var</td> <td style="text-align:center;">用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等</td></tr> <tr><td style="text-align:center;">/lib</td> <td style="text-align:center;">存放着和系统运行相关的库文件</td></tr> <tr><td style="text-align:center;">/opt</td> <td style="text-align:center;">额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把<code>tomcat</code>等都安装到这里</td></tr></tbody></table> <h2 id="三、linux用户管理及文件权限"><a href="#三、linux用户管理及文件权限" class="header-anchor">#</a> 三、linux用户管理及文件权限</h2> <p><img src="/assets/img/file-system.6ca875c7.png" alt="文件类型"></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre></div><table><thead><tr><th style="text-align:center;">符号</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">#</td> <td style="text-align:center;">代表超级管理员身份</td></tr> <tr><td style="text-align:center;">$</td> <td style="text-align:center;">代表普通用户身份</td></tr> <tr><td style="text-align:center;">~</td> <td style="text-align:center;">代表home目录（默认的）</td></tr></tbody></table> <p>以<code>超级管理员</code>登录，默认是在在根目录（/）下的<code>/root</code>目录；</p> <p>以<code>普通用户</code>crise登录，默认是在根目录（/）下的<code>home</code>目录的一个和普通用户同名的文件目录<code>/home/crise</code>。</p> <h3 id="_3-1-用户-用户组"><a href="#_3-1-用户-用户组" class="header-anchor">#</a> 3.1 用户/用户组</h3> <p>Linux 系统是一种多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。除了<code>超级用户Root</code>（该用户可以访问所有文件）外，它将文件访问者身份分为三种：</p> <h4 id="文件所有者-owner"><a href="#文件所有者-owner" class="header-anchor">#</a> 文件所有者（Owner）</h4> <p>当创建一个用户的时候，Linux 会为该用户创建一个主目录，路径为 <code>/home/&lt;username&gt;</code>，我们可以使用 cd ~，快捷进入主目录。如果你想放一个私密文件，就可以放在自己的主目录里，然后设置只能自己查看。</p> <h4 id="群组-group"><a href="#群组-group" class="header-anchor">#</a> 群组（Group）</h4> <ul><li>每个用户都有一个用户组，当创建用户的时候，会自动创建一个与它同名的用户组。</li> <li>⽤户组是具有相同系统权限的一组用户。方便多人操作的时候，为一群人分配权限。</li> <li>如果一个用户同时属于多个组，用户需要在用户组之间切换，才能具有其他用户组的权限。</li></ul> <h4 id="其他人-others"><a href="#其他人-others" class="header-anchor">#</a> 其他人（Others）</h4> <p>既不是文件所有者又不是文件所属群组成员的用户，就是其他人。</p> <h3 id="_3-2-相关命令"><a href="#_3-2-相关命令" class="header-anchor">#</a> 3.2 相关命令</h3> <h4 id="_1-useradd、userdel、usermod命令-添加-删除用户账号"><a href="#_1-useradd、userdel、usermod命令-添加-删除用户账号" class="header-anchor">#</a> ① useradd、userdel、usermod命令  [添加/删除用户账号]</h4> <p>useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码。使用useradd指令所建立的帐号，实际上是保存在<code>/etc/passwd</code>文本文件中。</p> <p>比如服务器需要共享，让群组人员进行访问，那就需要创建新的用户。我们用root用户登录服务器后，使用<code>useradd</code>命令创建的新的系统用户。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 创建指定的用户信息，并追加指定组为root的扩展组</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># useradd -G root 用户名</span>
</code></pre></div><p>再使用<code>passwd</code>命令设置登录密码</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># passwd 用户名</span>
</code></pre></div><p>最后便可以使用 <code>ssh</code> 命令进行用户登录</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># ssh 用户名@服务器ip</span>
</code></pre></div><p>最后如果需要删除某个用户的话，可以先用<code>root用户</code>进行登录</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># userdel 用户名</span>
</code></pre></div><h4 id="_2-groups、groupmod、groupmod、groupmod命令-用户组相关命令"><a href="#_2-groups、groupmod、groupmod、groupmod命令-用户组相关命令" class="header-anchor">#</a> ② groups、groupmod、groupmod、groupmod命令  [用户组相关命令]</h4> <p>在linux中的每个用户必须属于一个组，不能独立于组外，系统可以对一个用户组中的所有用户进行集中管理。组的增加、删除和修改实际上就是对<code>/etc/group</code>文件的更新。</p> <p>比如服务器共享之后，需要更改某个用户组的权限，或者增加某个用户组。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 增加一个新的用户组</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># groupadd 选项 用户组</span>
<span class="token comment"># 删除用户组</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># groupadd 选项 用户组</span>
<span class="token comment"># 修改用户组的属性</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># groupmod 选项 用户组</span>
</code></pre></div><h4 id="_3-其他命令"><a href="#_3-其他命令" class="header-anchor">#</a> ③ 其他命令</h4> <ul><li><code>users</code>命令[当前登录系统的所有用户]</li> <li><code>whoami</code>命令[查看当前登录用户]</li> <li><code>su 用户名</code>命令[切换登录用户]</li> <li><code>id 用户名</code>命令[显示指定用户信息，包括用户编号，用户名主要组编号及名称，附属组列表]</li> <li><code>finger 用户名</code>命令[显示用户详细资料]</li> <li><code>groups</code>命令[查看当前用户所属的工作组]</li> <li><code>chown</code>命令[用来变更文件或目录的拥有者或所属群组]</li> <li><code>chgrp</code>命令[用来变更文件或目录的所属群组]</li></ul> <h3 id="_3-3-文件权限"><a href="#_3-3-文件权限" class="header-anchor">#</a> 3.3 文件权限</h3> <p><img src="https://www.runoob.com/wp-content/uploads/2014/08/file-permissions-rwx.jpg" alt="文件权限">
Linux中权限分为以下几种：</p> <ul><li>r：代表权限是可读，r也可以用数字4表示</li> <li>w：代表权限是可写，w也可以用数字2表示</li> <li>x：代表权限是可执行，x也可以用数字1表示</li></ul> <p>在linux中每个文件有所有者、所在组、其它组的概念。只有文件所有者和超级用户可以修改文件或目录的权限。可以使用绝对模式（八进制数字模式），符号模式指定文件的权限。</p> <h3 id="_3-4-修改文件权限相关命令"><a href="#_3-4-修改文件权限相关命令" class="header-anchor">#</a> 3.4 修改文件权限相关命令</h3> <h4 id="_1-chmod命令-修改文件-目录的权限"><a href="#_1-chmod命令-修改文件-目录的权限" class="header-anchor">#</a> ① <code>chmod命令</code>  [修改文件/目录的权限]</h4> <h5 id="例子1"><a href="#例子1" class="header-anchor">#</a> 例子1：</h5> <p>在项目部署的时候，我们通常会遇见<code>cannot remove 'xxx': Permission denied</code>或<code>Operation not permitted</code>之类的错误，这通常是由于文件权限的问题导致的。</p> <p>我们以<code>index.html</code>和<code>assets</code>文件为例，我们可以先通过<code>ll</code>查看该文件权限</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># ll</span>
total <span class="token number">16</span>
<span class="token punctuation">..</span>.
-rwxr-xr-x <span class="token number">1</span> root root <span class="token number">5343</span> Jun  <span class="token number">6</span> <span class="token number">16</span>:08 index.html
drwxr-xr-x <span class="token number">1</span> root root <span class="token number">5343</span> Jun  <span class="token number">6</span> <span class="token number">16</span>:08 assets
</code></pre></div><p>这时候我们可以发现<code>index.html</code>文件权限为755，<code>crise</code>用户无法对该文件进行更改操作，那么我们可以如下操作：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 先查看crise所属用户组</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># groups crise</span>
crise <span class="token builtin class-name">:</span> crise
<span class="token comment"># 将crise用户添加进root组</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># usermod -G root crise</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># groups crise</span>
crise <span class="token builtin class-name">:</span> crise root
<span class="token comment"># 最后修改文件权限为775</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chmod 775 index.html</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chmod -R 775 assets</span>
</code></pre></div><p>再次部署，就不会出现这个问题了。
chmod</p> <h5 id="例子2"><a href="#例子2" class="header-anchor">#</a> 例子2：</h5> <p>我们有一个脚本<code>crawler.sh</code>，我们每次开机到要求其自动启动该怎么办？</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 为新建的脚本crawler.sh添加可执行权限</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chmod +x crawler.sh</span>
<span class="token comment"># 把crawler.sh脚本添加到开机启动项里面</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chkconfig --add crawler.sh</span>
<span class="token comment"># 查看是否添加成功</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chkconfig --list</span>
</code></pre></div><h5 id="例子3"><a href="#例子3" class="header-anchor">#</a> 例子3：</h5> <p>默认服务器上所有用户都有<code>rm</code>这个命令的执行权限，因此用户根本不需要<code>sudo</code>就可以使用<code>rm</code>命令删除文件，因此如果我们将<code>rm</code>命令的权限改为 700，这样普通用户要执行<code>rm</code>命令就必须加<code>sudo</code>，但是<code>rm</code>命令被我们禁止执行了，所以服务器上面的所有文件他都不能删除了。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># ll /usr/bin/rm</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># chmod 700 /usr/bin/rm</span>
</code></pre></div><h2 id="四、linux基本命令"><a href="#四、linux基本命令" class="header-anchor">#</a> 四、linux基本命令</h2> <p>下面会从三个部分来讲述相关的<code>Linux</code>命令，第一部分是服务部署前的准备，第二部分是登录服务器部署，第三部分是问题排查相关。</p> <h3 id="_4-1-部署前命令"><a href="#_4-1-部署前命令" class="header-anchor">#</a> 4.1 部署前命令</h3> <h4 id="登录远程服务器"><a href="#登录远程服务器" class="header-anchor">#</a> 登录远程服务器</h4> <p><code>ssh</code>登录远程服务器</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># ssh 用户名@服务器ip</span>
</code></pre></div><p>此外，<code>ssh</code>默认使用的是<code>22</code>端口，如果特殊需要修改端口，可以通过<code>-p</code>参数修改，如下：<code>ssh -p &lt;port&gt; &lt;user&gt;@&lt;host&gt;</code>。</p> <h4 id="下载文件"><a href="#下载文件" class="header-anchor">#</a> 下载文件</h4> <p><code>apt-get</code>是Debian系列(debian、ubuntu系统)下的apt包管理工具</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># apt-get install &lt;包名称&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># apt-get delete &lt;包名称&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># apt-get upgrade &lt;包名称&gt;</span>
</code></pre></div><p><code>rpm</code>、<code>yum</code>是RedHat系列(RedHat、CentOS、Fedora等)下的包管理工具。
<code>rpm</code> 只能安装已经下载到本地机器上的<code>rpm</code>包，<code>yum</code>能在线下载并安装<code>rpm</code>包,能更新系统，且还能自动处理包与包之间的依赖问题，这个是<code>rpm</code> 工具所不具备的。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum install &lt;包名称&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum remove &lt;包名称&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum update &lt;包名称&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum list</span>
<span class="token comment"># 查找安装包</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum search &lt;keyword&gt;</span>
<span class="token comment"># 清除已经安装过的包</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum clean all</span>
</code></pre></div><p><code>wget</code> 是一个可以从网络上下载文件的工具，支持断点下载功能，同时支持FTP和HTTP下载方式，它的工作原理是从 Internet 上获取数据，并将其保存到本地文件中或显示在你的终端上。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># yum install -y wget</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># wget &lt;url&gt;</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># wget -O &lt;重命名名称&gt; &lt;url&gt;</span>
</code></pre></div><p>例如：下载<code>redis</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># wget -O redis.tar.gz https://download.redis.io/releases/redis-6.0.8.tar.gz</span>
</code></pre></div><h4 id="复制-移动内容"><a href="#复制-移动内容" class="header-anchor">#</a> 复制/移动内容</h4> <p><code>cp</code>复制文件，<code>mv</code>移动或改名文件</p> <ul><li>-i/--interactive: 覆盖前询问</li> <li>-r: 递归复制，用于复制目录（<code>mv</code>没有此参数）</li> <li>-f/--force: 强行复制/移动文件或内容，不论目的文件或目录是否已存在</li> <li>-u/--update：只有在源文件比目标文件新时才复制/移动</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># cp &lt;源文件&gt; &lt;目标文件夹&gt;</span>
<span class="token comment"># 1、复制文件夹，可以加上`-r`参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># cp -r &lt;源文件夹&gt; &lt;目标文件夹&gt;</span>
<span class="token comment"># 2、强行复制文件或内容，不论目的文件或目录是否已存在，可以加上`-f`参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># cp -u &lt;源文件&gt; &lt;目标文件&gt;</span>
</code></pre></div><h4 id="压缩-解压文件"><a href="#压缩-解压文件" class="header-anchor">#</a> 压缩/解压文件</h4> <p><code>zip</code>压缩，<code>unzip</code>解压</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 压缩文件</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># zip -r 压缩文件名.zip &lt;要压缩的文件或文件夹&gt;</span>
<span class="token comment"># 1、把文件解压到当前目录下</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># unzip 文件名.zip</span>
<span class="token comment"># 2、如果要把文件解压到指定的目录下，需要用到-d参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># unzip -d &lt;目录&gt; 文件名.zip</span>
<span class="token comment"># 3、解压的时候，有时候不想覆盖已经存在的文件，那么可以加上`-n`参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># unzip -n -d &lt;目录&gt; 文件名.zip</span>
</code></pre></div><p><code>tar</code>解压（可以解压.tar，.tgz，.tgz.gz，.tar.bz2，.tar.Z等后缀名文件）</p> <ul><li>-z: 支持 gzip 解压文件</li> <li>-c: 建立新的压缩文件</li> <li>-v: 显示操作过程</li> <li>-f: 指定压缩文件</li> <li>-x: 从压缩的文件中提取文件</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 压缩文件</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># tar -zcvf 文件名.tar.gz &lt;要压缩的文件或文件夹&gt;</span>
<span class="token comment"># 1、把文件解压到当前目录下</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># tar -xvf 文件名.tar</span>
<span class="token comment"># 2、如果要把文件解压到指定的目录下，需要用到-d参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># tar -d &lt;目录&gt; 文件名.zip</span>
<span class="token comment"># 3、解压的时候，有时候不想覆盖已经存在的文件，那么可以加上`-n`参数</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># unzip -n -d &lt;目录&gt; 文件名.zip</span>
</code></pre></div><h4 id="建立软连接"><a href="#建立软连接" class="header-anchor">#</a> 建立软连接</h4> <p>服务器安装<code>node</code>或者安装<code>nginx</code>之后，可以查看安装的版本，但是在全局环境下会发现找不到该命令，所以需要建立全局的软连接。</p> <p>假如：<code>nginx</code>安装在<code>/usr/local</code>目录下</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">ln</span> -s /usr/local/nginx/sbin/nginx /usr/local/bin/nginx
</code></pre></div><h3 id="_4-2-部署阶段命令"><a href="#_4-2-部署阶段命令" class="header-anchor">#</a> 4.2 部署阶段命令</h3> <p>如果是前端项目，使用部署脚本部署的话，那么在build之后，便需要使用远程同步工具，同步生成的构建产物。</p> <h4 id="scp远程复制"><a href="#scp远程复制" class="header-anchor">#</a> scp远程复制</h4> <p><code>scp</code>(secure copy 的缩写)是 <code>Linux</code> 系统下基于 <code>ssh</code> 登陆进行安全的远程文件拷贝命令。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 从客户机上传指定文件到服务器</span>
<span class="token punctuation">[</span>crise@MacBook dist<span class="token punctuation">]</span>$ <span class="token function">scp</span> -r <span class="token operator">&lt;</span>文件名<span class="token operator">&gt;</span> 用户名@服务器ip:<span class="token operator">&lt;</span>指定文件夹<span class="token operator">&gt;</span>
</code></pre></div><h4 id="rsync远程同步文件"><a href="#rsync远程同步文件" class="header-anchor">#</a> rsync远程同步文件</h4> <p><code>rsync</code>命令是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件。使用所谓的“rsync算法”来使本地和远程两个主机之间的文件达到同步，这个算法只传送两个文件的不同部分，而不是每次都整份传送，因此速度相当快。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 从客户机上传指定文件到服务器</span>
<span class="token punctuation">[</span>crise@MacBook dist<span class="token punctuation">]</span>$ <span class="token function">rsync</span> -auzv ./assets/* 用户名@服务器ip:<span class="token operator">&lt;</span>指定文件夹<span class="token operator">&gt;</span>
</code></pre></div><h3 id="_4-3-问题调试排查阶段命令"><a href="#_4-3-问题调试排查阶段命令" class="header-anchor">#</a> 4.3 问题调试排查阶段命令</h3> <h4 id="ping命令"><a href="#ping命令" class="header-anchor">#</a> ping命令</h4> <p>首先部署完之后，我们访问服务会发现可能无法访问。这时，我们可以先通过ping指令确定与目标机器的连通性。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 从客户机上传指定文件到服务器</span>
<span class="token punctuation">[</span>crise@MacBook dist<span class="token punctuation">]</span>$ <span class="token function">ping</span> <span class="token operator">&lt;</span>ip地址<span class="token operator">&gt;</span>
</code></pre></div><p>如果没有报<code>Request timeout</code>，确认了与目标机器可以连通，但是仍然无法访问，则可以通过<code>telnet</code>命令来确认服务端口是否可以访问。如下，确认80和8080端口是否正常，正常和非正常提示如下。</p> <h4 id="netstat命令"><a href="#netstat命令" class="header-anchor">#</a> netstat命令</h4> <p><code>netstat</code>是”network statistics“的缩写，其功能用于显示各种网络相关信息，可以用于显示与 <code>IP</code>、<code>TCP</code>、<code>UDP</code> 和 <code>ICMP</code> 协议相关的统计数据。</p> <ul><li>a	显示所有连线中的Socket</li> <li>p	显示正在使用Socket的程序识别码和程序名称</li> <li>n	直接使用IP地址，不通过域名服务器</li> <li>l	仅列出在监听的服务状态</li> <li>t	显示TCP传输协议的连线状况</li> <li>u	显示UDP传输协议的连线状况</li></ul> <p>我们可以通过<code>netstat -anltp</code>查看所有tcp端口的使用情况，也可以结合<code>grep</code>一起使用，如<code>netstat -apn | grep 80</code>。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 从客户机上传指定文件到服务器</span>
<span class="token punctuation">[</span>root@local dist<span class="token punctuation">]</span><span class="token comment"># netstat -apn | grep 80</span>
tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0.0</span>.0.0:80              <span class="token number">0.0</span>.0.0:*               LISTEN      <span class="token number">2211</span>/nginx: master
<span class="token punctuation">..</span>.
</code></pre></div><p>通过查看端口的占用情况和开放状态，可以判断服务未启动成功的原因。如果被占用，可以考虑更换一个端口。</p> <h4 id="ps、lsof、kill命令"><a href="#ps、lsof、kill命令" class="header-anchor">#</a> ps、lsof、kill命令</h4> <p>所以当得知我们的服务出问题了的时候，我们可以通过ps来查看对应进程的状态，确定是否是进程挂了。</p> <p><code>ps</code>是”process status“的缩写，其功能是用于显示当前系统的进程状态。可以查看到进程的所有信息，例如进程的<code>号码</code>、<code>发起者</code>、<code>系统资源使用占比</code>（处理器与内存）、<code>运行状态</code>等等。</p> <ul><li>a	显示现行终端机下的所有程序，包括其他用户的程序</li> <li>u 显示使用者的名称和起始时间</li> <li>x	显示所有系统程序，包括那些没有终端的程序
使用这一命令时，我们也可以结合<code>grep</code>来查询，如<code>ps aux | grep 80</code>，如果你查询之后发现进程不在，那么就可以重启。</li></ul> <p><code>lsof</code>是“list opened files”的缩写，其功能是用于查看文件的进程信息。既然Linux系统中的一切都是文件，那么使用lsof命令查看进程打开的文件，又或是查看文件的进程信息，都能够很好的帮助用户了解相关服务的运行状态</p> <ul><li>-p &lt;进程号&gt;	列出PID进程所打开的文件</li> <li>i &lt;条件&gt;	列出符合条件的进程
我们通常可以使用<code>lsof -i:8080</code>查看哪个进程占用了8080端口。</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看服务器 80 端口的占用情况</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># lsof -i:80</span>
COMMAND  PID   <span class="token environment constant">USER</span>   FD   TYPE DEVICE SIZE/OFF NODE NAME
nginx   <span class="token number">2211</span>   root    9u  IPv4  <span class="token number">30671</span>      0t0  TCP *:http <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span>
nginx   <span class="token number">2212</span> nobody    9u  IPv4  <span class="token number">30671</span>      0t0  TCP *:http <span class="token punctuation">(</span>LISTEN<span class="token punctuation">)</span>
</code></pre></div><p>假如发现端口冲突的情况，而占用该端口的程序不是你希望的程序时，如果想要关掉该进程，那我们可以使用<code>kill &lt;pid&gt;</code>命令</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 杀掉pid编号为2211的进程</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># kill 2211</span>
<span class="token comment"># 强制杀掉pid编号为2211的进程</span>
<span class="token punctuation">[</span>root@local ~<span class="token punctuation">]</span><span class="token comment"># kill -9 2211</span>
</code></pre></div><h4 id="tail命令"><a href="#tail命令" class="header-anchor">#</a> tail命令</h4> <p>如果我们的<code>node服务</code>运行正常，但是有部分功能出错了。这时就需要动手查运行日志了。一般情况下，我们都会将系统运行的日志输出到<code>log</code>文件中。
然后我们可以通过<code>tail</code>命令来查看日志。</p> <ul><li>f	持续显示文件最新追加的内容</li> <li>s&lt;秒数&gt;：与-f选项连用，指定监视文件变化时间隔的秒数，默认1秒</li> <li>n <code>&lt;N&gt;</code>输出文件的尾部N（N位数字）行内容</li> <li>--pid=&lt;进程号&gt;	与“-f”选项连用，当指定的进程号的进程终止后，自动退出tail命令</li></ul> <p>我们通常使用<code>tail -f log</code>命令来查看日志。这一命令会动态更新新增加的日志内容，非常适合用来调试。</p> <h3 id="_4-4-其他常用命令"><a href="#_4-4-其他常用命令" class="header-anchor">#</a> 4.4 其他常用命令</h3> <table><thead><tr><th style="text-align:center;">命令</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">参数</th></tr></thead> <tbody><tr><td style="text-align:center;">man &lt;命令&gt;</td> <td style="text-align:center;">查看命令、配置文件及服务的帮助信息</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">cd &lt;目录名&gt;</td> <td style="text-align:center;">切换当前目录</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">mkdir &lt;名称&gt;</td> <td style="text-align:center;">创建文件夹</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">touch &lt;文件名&gt;</td> <td style="text-align:center;">不存在则创建，<br>存在则修改文件的访问时间和修改时间属性</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">cat &lt;文件名&gt;</td> <td style="text-align:center;">查看当前文件</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">find [路径] [参数] &lt;文件名&gt;</td> <td style="text-align:center;">查找某个文件</td> <td style="text-align:center;">-name:匹配名称</td></tr> <tr><td style="text-align:center;">pwd</td> <td style="text-align:center;">获取当前命令所在的绝对路径</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">rmdir</td> <td style="text-align:center;">删除文件夹（只能删除空文件夹）</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">rm</td> <td style="text-align:center;">删除文件或文件夹</td> <td style="text-align:center;">-r:删除目录/文件夹<br>-f:强制删除<br>rm -rf:递归强制删除文件夹及其所属文件</td></tr> <tr><td style="text-align:center;">bash &lt;文件名.sh&gt;</td> <td style="text-align:center;">通过bash调用执行脚本</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">top</td> <td style="text-align:center;">显示或管理执行中的程序</td> <td style="text-align:center;"></td></tr></tbody></table> <h3 id="_4-5-vim编辑器相关指令"><a href="#_4-5-vim编辑器相关指令" class="header-anchor">#</a> 4.5 vim编辑器相关指令</h3> <p><code>vim &lt;文件名&gt;</code>，便可以进入<code>vim</code>的一般模式</p> <table><thead><tr><th style="text-align:center;">命令</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">i</td> <td style="text-align:center;">切换到输入模式</td></tr> <tr><td style="text-align:center;">ESC</td> <td style="text-align:center;">退出输入模式，切换到命令模式</td></tr> <tr><td style="text-align:center;">:w</td> <td style="text-align:center;">保存</td></tr> <tr><td style="text-align:center;">:q</td> <td style="text-align:center;">退出</td></tr> <tr><td style="text-align:center;">:q!</td> <td style="text-align:center;">强制退出，不保存</td></tr> <tr><td style="text-align:center;">:wq! 强制保存退出</td> <td style="text-align:center;"></td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/ops/linux-ci-cd.html" class="prev">
        项目CI/CD持续集成部署方案，看这一篇就够了
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9120daf7.js" defer></script><script src="/assets/js/2.a6e094ff.js" defer></script><script src="/assets/js/27.3693eee6.js" defer></script>
  </body>
</html>
