(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{592:function(t,a,_){"use strict";_.r(a);var v=_(65),s=Object(v.a)({},(function(){var t=this,a=t.$createElement,_=t._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"小程序跨端方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#小程序跨端方案"}},[t._v("#")]),t._v(" 小程序跨端方案")]),t._v(" "),_("h2",{attrs:{id:"_1、背景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1、背景"}},[t._v("#")]),t._v(" 1、背景")]),t._v(" "),_("p",[t._v("目前，小程序在用户规模及商业化方面都取得了极大的成功。除了微信之外，支付宝、京东、百度、字节跳动等平台都推出了自己的小程序。")]),t._v(" "),_("p",[t._v("每一家小程序都重新开发一遍显然不现实，各大平台的流量和优于H5的体验也不可能放弃，因此探索一个小程序的跨端方案，以最小的成本，实现在微信、快手、百度等多个小程序上的业务快速迭代，势在必行。")]),t._v(" "),_("h2",{attrs:{id:"_2、-调研"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2、-调研"}},[t._v("#")]),t._v(" 2、 调研")]),t._v(" "),_("h3",{attrs:{id:"_2-1-公司内目前多端处理方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-公司内目前多端处理方案"}},[t._v("#")]),t._v(" 2.1 公司内目前多端处理方案")]),t._v(" "),_("p",[t._v("跨端框架 uni-app、taro等\n 原生直接写\n原生壳+webview")]),t._v(" "),_("h3",{attrs:{id:"_2-2-市面上小程序跨端方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-市面上小程序跨端方案"}},[t._v("#")]),t._v(" 2.2 市面上小程序跨端方案")]),t._v(" "),_("p",[t._v("小程序跨端在各大公司都有强烈的需求，发展至今已百花齐放，下面罗列了一些各大厂商提供的框架：")]),t._v(" "),_("p",[t._v("uni-app\ttaro\tremax\tmpvue\tchameloen\tmegalo\tkbone\n厂家\tHbuilder\t京东\t蚂蚁金服\t美团\t滴滴\t网易\t微信\n从轻轻松松就罗列这么一堆框架，其实可以看出一些东西：")]),t._v(" "),_("p",[t._v("市场需求确实很大，\n目前没有一家框架是有压倒性优势的，而市场需求就那么大，肯定是支撑不了这么多框架持续繁荣下去的，后面肯定会有不止一个框架会慢慢死掉\n因为这是一个兼容性质的框架，是需要跟随各大厂商API变动，即时更新的")]),t._v(" "),_("p",[t._v("公司不是开源组织，不可能存在脱离公司需求的市场需求。开源是他们的一个态度和对社区做的贡献，谁也不敢保证哪个框架可以一直高效的迭代下去")]),t._v(" "),_("p",[t._v("一旦框架停止维护，那使用这个框架的项目再想改换别的方案，就很难了")]),t._v(" "),_("p",[t._v("（ps：mpvue目前已停止更新）")]),t._v(" "),_("h3",{attrs:{id:"_2-3-瓜子的解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-瓜子的解决方案"}},[t._v("#")]),t._v(" 2.3 瓜子的解决方案")]),t._v(" "),_("p",[t._v("基于市场的调研，以及我司目前业务快速迭代的现状，团队内部已初步达成统一意见："),_("strong",[t._v("小程序多端适配使用H5 + Webview的形式")])]),t._v(" "),_("p",[t._v("这个方式可大大缩减开发成本，但一个h5项目，想要同时在多个小程序内正常运行，还是有不小的兼容成本，这个成本主要在两方面：")]),t._v(" "),_("ul",[_("li",[t._v("每个小程序需要一个原生壳，以及一些功能的承接逻辑，比如登录、支付、webview、地图等等；")]),t._v(" "),_("li",[t._v("h5里使用原生小程序的功能，需要区分小程序判断使用，以及一些展示上的判断；\n而进一步缩减这些成本，并且统一规范，就是跨端SDK要做的事情")])]),t._v(" "),_("h2",{attrs:{id:"_3-跨端方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-跨端方案"}},[t._v("#")]),t._v(" 3 跨端方案")]),t._v(" "),_("p",[t._v("针对以上两方面，分别处理。")]),t._v(" "),_("h3",{attrs:{id:"_3-1-h5端"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-h5端"}},[t._v("#")]),t._v(" 3.1 h5端")]),t._v(" "),_("p",[t._v("通过 webview-sdk 集成通用功能，抹平各h5页面在小程序间的兼容差异")]),t._v(" "),_("h4",{attrs:{id:"_3-1-1-集成api"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-集成api"}},[t._v("#")]),t._v(" 3.1.1 集成API")]),t._v(" "),_("p",[t._v("环境判断\ngetEnv\nisMiniWebview 判断小程序webview环境\nisKsMiniprogram 判断快手小程序原生环境\n...\n页面跳转\nnavigateTo\nnavigateBack\n获取定位\ngetLocation\n缓存\ngetStorageSync\nsetStorageSync\n页面初始化\nminiWebviewReady\n接口请求\nRequest\n分享\n登录")]),t._v(" "),_("h4",{attrs:{id:"_3-1-2-文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-文档"}},[t._v("#")]),t._v(" 3.1.2 文档")]),t._v(" "),_("h3",{attrs:{id:"_3-2-原生壳"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-原生壳"}},[t._v("#")]),t._v(" 3.2 原生壳")]),t._v(" "),_("h4",{attrs:{id:"_3-2-1-微信小程序标准壳"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-微信小程序标准壳"}},[t._v("#")]),t._v(" 3.2.1 微信小程序标准壳")]),t._v(" "),_("h4",{attrs:{id:"_3-2-2-可转换为其他小程序的编译器"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-可转换为其他小程序的编译器"}},[t._v("#")]),t._v(" 3.2.2 可转换为其他小程序的编译器")]),t._v(" "),_("p",[t._v("上面标准模版已内置编译器脚本，可直接编译为其他平台代码发布")]),t._v(" "),_("h4",{attrs:{id:"_3-2-3-功能及特点"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-功能及特点"}},[t._v("#")]),t._v(" 3.2.3 功能及特点")]),t._v(" "),_("p",[t._v("学习成本低\n模版代码为微信小程序原生语法\n目前支持微信、快手、百度小程序\n内置常用功能，开箱即用\n登录+人机校验\nwebview页面配置\n定位\n接口调用封装\n...\n开发模式支持热更新\n支持条件编译")]),t._v(" "),_("h2",{attrs:{id:"_4-使用方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用方式"}},[t._v("#")]),t._v(" 4 使用方式")]),t._v(" "),_("p",[t._v("使用分为新项目和老项目两种场景")]),t._v(" "),_("h3",{attrs:{id:"_4-1-新项目接入步骤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-新项目接入步骤"}},[t._v("#")]),t._v(" 4.1 新项目接入步骤")]),t._v(" "),_("p",[t._v("1）拷贝3.2.1里标准代码")]),t._v(" "),_("p",[t._v("2）更改小程序相关配置（appid、域名配置、底部菜单配置...）")]),t._v(" "),_("p",[t._v("3）安装依赖，执行编译")]),t._v(" "),_("p",[t._v("4）h5项目做必要的小程序适配，比如登录等功能")]),t._v(" "),_("p",[t._v("测试无问题后即可发布到对应小程序平台")]),t._v(" "),_("h4",{attrs:{id:"_4-1-老项目接入步骤"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-老项目接入步骤"}},[t._v("#")]),t._v(" 4.1 老项目接入步骤")]),t._v(" "),_("p",[t._v("1）拷贝3.2.1里项目的script文件夹到业务项目根目录")]),t._v(" "),_("p",[t._v("2）调整 script/config 内的目录配置匹配业务项目")]),t._v(" "),_("p",[t._v("3）安装相关依赖，执行编译脚本")]),t._v(" "),_("p",[t._v("4）将原项目中微信小程序内置API替换为webview-sdk提供的API")]),t._v(" "),_("p",[t._v("测试无问题后即可发布到对应小程序平台")])])}),[],!1,null,null,null);a.default=s.exports}}]);