(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{488:function(t,s,a){t.exports=a.p+"assets/img/double-float.78ff00fa.jpg"},489:function(t,s,a){t.exports=a.p+"assets/img/double-float-1.0cc83f73.jpg"},490:function(t,s,a){t.exports=a.p+"assets/img/double-float-2.f2c66001.jpg"},491:function(t,s,a){t.exports=a.p+"assets/img/double-float-max.cf453cde.jpg"},492:function(t,s,a){t.exports=a.p+"assets/img/rounding-error.4292e697.png"},493:function(t,s,a){t.exports=a.p+"assets/img/double-float-4.86a6da5d.jpg"},494:function(t,s){t.exports="data:image/png;base64,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"},495:function(t,s,a){t.exports=a.p+"assets/img/rounding-error-3.07e69e43.jpg"},562:function(t,s,a){"use strict";a.r(s);var n=a(65),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"js精度丢失问题深度解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#js精度丢失问题深度解析"}},[t._v("#")]),t._v(" js精度丢失问题深度解析")]),t._v(" "),n("h2",{attrs:{id:"背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),n("p",[t._v("我们在做项目的过程中，涉及到订单号或者价格计算的时候，经常会出现"),n("code",[t._v("js精度丢失")]),t._v("的问题。比如：")]),t._v(" "),n("ul",[n("li",[t._v("后端在主接口给你返回一个Long类型的订单号（假设18位），然后你获取到订单号，再拿订单号去请求别的接口，然后发现这个接口返回数据有问题，然后开始和后端一顿拉扯，最后发现是后端返回给你的订单号和你给后端传参的订单号不一致；")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 18位")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("202311271723152070")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 202311271723152060")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 17位")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20231127172315207")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 20231127172315210")]),t._v("\n")])])]),n("ul",[n("li",[t._v("我们在计算商品价格的时候，涉及到小数的加减乘除，常常会出现前端计算出来的价格和用户要支付的金额不相等的情况；")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.30000000000000004")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" c")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" c "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.5")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.30000000000000004")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.09999999999999998")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 乘法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("19.9")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1989.9999999999998")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.8")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.4000000000000004")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 除法")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.9999999999999996")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.69")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.06899999999999999")]),t._v("\n")])])]),n("p",[t._v("下面我们来探讨下出现以上问题的具体原因和解决方案。")]),t._v(" "),n("h2",{attrs:{id:"浮点数存储原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浮点数存储原理"}},[t._v("#")]),t._v(" 浮点数存储原理")]),t._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[t._v("IEEE 754 标准")]),t._v(" "),n("p",[t._v("IEEE二进制浮点数算术标准"),n("a",{attrs:{href:"https://zh.wikipedia.org/wiki/IEEE_754",target:"_blank",rel:"noopener noreferrer"}},[t._v("IEEE 754"),n("OutboundLink")],1),t._v("是20世纪80年代以来最广泛使用的浮点数运算标准。")]),t._v(" "),n("p",[t._v("IEEE 754规定了四种表示浮点数值的方式："),n("code",[t._v("单精确度（32位）")]),t._v("、"),n("code",[t._v("双精确度（64位）")]),t._v("、"),n("code",[t._v("延伸单精确度")]),t._v("（43比特以上，很少使用）与"),n("code",[t._v("延伸双精确度")]),t._v("（79比特以上，通常以80位实现）。")])]),t._v(" "),n("p",[t._v("和其它语言如Java和Python不同，JavaScript中所有数字包括整数和小数都只有一种类型 — "),n("code",[t._v("Number")]),t._v("。它的实现遵循 IEEE 754 标准，使用64位固定长度来表示，也就是标准的 "),n("code",[t._v("double 双精度浮点数")]),t._v("。")]),t._v(" "),n("p",[t._v("这样的存储结构优点是可以归一化处理整数和小数，节省存储空间。\n"),n("img",{attrs:{src:a(488),alt:"double 双精度浮点数"}})]),t._v(" "),n("ul",[n("li",[t._v("符号位S：第 1 位是正负数符号位（sign），0代表正数，1代表负数")]),t._v(" "),n("li",[t._v("指数位E：中间的 11 位存储指数（exponent），"),n("em",[n("strong",[t._v("指数按照补位运算，即直接 1023（偏移值） 加指数位")])]),t._v("（由于指数位的 11 位不包括符号位，那么为了达到正负指数的效果，就引入了指数的偏移值）")]),t._v(" "),n("li",[t._v("尾数位M：最后的 52 位是小数点后的尾数（mantissa），"),n("em",[n("strong",[t._v("超出52位的部分自动舍0进1")])])])]),t._v(" "),n("p",[t._v("举个🌰，假如我们将 "),n("red",[t._v("106.6953125")]),t._v(" 转换为二进制数按规则放进内存中：")],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("106.6953125")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1101010.1011001")]),t._v("\n")])])]),n("p",[t._v("首先 "),n("code",[t._v("106.6953125")]),t._v(" 是正数，所以内存中符号位为0, 0表示正，1表示负\n"),n("img",{attrs:{src:a(489),alt:"double 双精度浮点数"}}),t._v(" "),n("red",[t._v("1101010.1011001")]),t._v(" 用"),n("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%A7%91%E5%AD%A6%E8%AE%B0%E6%95%B0%E6%B3%95",target:"_blank",rel:"noopener noreferrer"}},[t._v("科学计数法"),n("OutboundLink")],1),t._v("表示为 => "),n("red",[t._v("1.1010101011001 * 2^6")]),t._v("，然后我们计算指数位：")],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.1010101011001 * 2^6")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指数6 + 偏移量1023 = 1029")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1029.")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 10000000101")]),t._v("\n")])])]),n("p",[t._v("而指数位要求放补码。正数的补码是其原码本身不变（规则参考"),n("RouterLink",{attrs:{to:"/blog/computer/binary.html#补码"}},[t._v("补码计算规则")]),t._v("），所以将 10000000101 填入指数位。\n"),n("img",{attrs:{src:a(490),alt:"double 双精度浮点数"}}),t._v("\n尾数位部分直接将小数转换后的二进制 1010101011001 填入，不足52位的补0即可。")],1),t._v(" "),n("p",[t._v("可能有个疑问：小数点前面的1去哪里了？由于尾数部分是规格化表示的，最高位总是“1”，所以直接隐藏掉，同时也节省了1个位出来存储小数，提高精度。")]),t._v(" "),n("h2",{attrs:{id:"数字超限导致精度丢失"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数字超限导致精度丢失"}},[t._v("#")]),t._v(" 数字超限导致精度丢失")]),t._v(" "),n("p",[t._v("IEEE 754标准规定，最大安全整数："),n("code",[t._v("Number.MAX_SAFE_INTEGER")]),t._v(" => 9007199254740991（即2^53-1）。当js的数值超过这个最大安全整数，就会存在精度丢失问题，也就会出现文章开头第一种类型问题以及其他怪异现象。")]),t._v(" "),n("h3",{attrs:{id:"number最大值计算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#number最大值计算"}},[t._v("#")]),t._v(" Number最大值计算")]),t._v(" "),n("p",[t._v("根据浮点数存储原理一节，我们可以知道，js中我们能够表达、枚举和存储的最大数为 "),n("red",[t._v("Number.MAX_VALUE")]),t._v("，它的计算规则为：")],1),t._v(" "),n("p",[n("em",[n("strong",[t._v("指数部分最大的数 ✖️ 尾数部分最大的数")])])]),t._v(" "),n("p",[n("img",{attrs:{src:a(491),alt:"double 双精度浮点数"}})]),t._v(" "),n("ul",[n("li",[t._v("指数部分最大的数：2^10 −1 = 1023")]),t._v(" "),n("li",[t._v("尾数最大部分为 1(隐藏位).(52个1)，为 "),n("red",[t._v("11111111111111111111111111111111111111111111111111111")]),t._v("，即 2^53 − 1")],1)]),t._v(" "),n("p",[t._v("所以最大数的二进制表示为："),n("red",[t._v("1.11111111111111111111111111111111111111111111111111111 * 2^1023")]),t._v("，转换成十进制，最大值则为：")],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 尾数最大部分为 1(隐藏位).(52个1)，在二进制将小数点移到最右侧，需要将指数部分减去52位：")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.11111111111111111111111111111111111111111111111111111")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1023")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("111111111111111111111111111111111111111111111111111111")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1023")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("52")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("53")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("971")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.7976931348623157e+308")]),t._v("\n")])])]),n("p",[t._v("实际上，这正是Number能够表达、枚举和存储的最大值了，Number用了一个常量来表示，超过这个数就会使用Infinity来表示。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Infinity")]),t._v("\n")])])]),n("h3",{attrs:{id:"number最大安全整数计算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#number最大安全整数计算"}},[t._v("#")]),t._v(" Number最大安全整数计算")]),t._v(" "),n("p",[t._v("上面只是Number有能力表示的最大数，但是和精度表示还是两码事。至于为什么不能用Number最大值来表示Number的最大安全整数呢？实际是因为指数表示并不能表示连续的数字。")]),t._v(" "),n("p",[t._v("实际上一旦超过某个范围，js就不能够精确表示某个数了，只能用近似的数去表示，所以你可以看到这样的奇怪现象。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740993")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740992")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])]),n("p",[t._v("在计算Number最大值中我们学过，"),n("strong",[t._v("科学计数法能够均匀枚举的整数范围就是尾数最大值")]),t._v("，所以我们很容易得出，安全的整数范围就是：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("111111111111111111111111111111111111111111111111111111")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("53")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9007199254740991")]),t._v("\n")])])]),n("p",[t._v("因为有53位（加上隐藏位）所以能够枚举和表达出的每一个[0,9007199254740991]之间的整数，超过这个范围就不行了，所以才会出现"),n("red",[t._v("9007199254740993 === 9007199254740992")]),t._v("这种怪异现象。")],1),t._v(" "),n("h3",{attrs:{id:"解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("p",[t._v("js Number的最大安全整数为16位，所以超过16的数字最好使用string类型存储。")]),t._v(" "),n("h2",{attrs:{id:"舍入误差导致精度丢失"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#舍入误差导致精度丢失"}},[t._v("#")]),t._v(" 舍入误差导致精度丢失")]),t._v(" "),n("h3",{attrs:{id:"舍入误差"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#舍入误差"}},[t._v("#")]),t._v(" 舍入误差")]),t._v(" "),n("p",[t._v("有了上面对浮点数进行介绍，现在我们进入了一个更棘手的问题–舍入误差。它是所有开发者使用浮点数开发的祸根，JavaScript开发者尤其如此，因为JavaScript开发者唯一可用的编号格式是浮点数。")]),t._v(" "),n("p",[t._v("上面提到的分数⅓不能在以10为底中有限表示。这实际上在任何数制中都存在。例如，在在以二为底的数字中，1 / 10不能有限表示。被表示为0.00110011001100110011……注意0011是无限重复的。这是因为这个特别的怪癖，舍入误差造成的。")]),t._v(" "),n("p",[t._v("先看一个舍入误差的例子。考虑一个最著名的无理数，PI：3.141592653589793……大多数人记得前五位（3.1415）非常棒——我们将使用这个例子说明舍入误差，因此可以计算舍入误差：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其中`R`代表圆形的半径，`A`代表一个实数。`Bp`代表以`p`为底的精度。所以PI的舍入误差：0.00009265……")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("R")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" Bp"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),n("p",[t._v("虽然这看起似乎不是很严重，让我们试着用以二为底的数来检验这个想法。")]),t._v(" "),n("p",[t._v("比如 "),n("strong",[t._v("分数1/10")]),t._v("，在十进制，它被写作 "),n("strong",[t._v("0.1")]),t._v("。在二进制中，它是："),n("strong",[t._v("0.00011001100110011……")]),t._v(" 假设我们仅保留5位尾数，可以写为"),n("strong",[t._v("0.0001")]),t._v("。但0.0001在二进制表示法中实际是**1 / 16（或0.0625）**的表示！这意味着有"),n("red",[t._v("舍入误差为0.0375")]),t._v("，这是相当大的。"),n("em",[n("strong",[t._v("想象一下基本的加法运算，如0.1 + 0.2，答案返回0.2625")])]),t._v("！")],1),t._v(" "),n("p",[t._v("幸运的是，浮点规范指定ECMAScript最多使用52个尾数，所以舍入误差变得很小——规范的具体细节规避了大部分的舍入误差。因为对浮点数进行算术运算的过程中误差会被放大，IEEE 754规范还包括用于数学运算的具体算法。")]),t._v(" "),n("h3",{attrs:{id:"为什么-0-1-0-2-0-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么-0-1-0-2-0-3"}},[t._v("#")]),t._v(" 为什么 0.1 + 0.2 ！== 0.3？")]),t._v(" "),n("p",[t._v("其实，了解了浮点数储存原理和舍入误差，我们应该大致明白为什么会丢失精度了，接下来我们以 "),n("code",[t._v("0.1 + 0.2 ！== 0.3")]),t._v(" 为例，一步步分析下丢失的过程。")]),t._v(" "),n("h4",{attrs:{id:"第一步-转换为二进制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-转换为二进制"}},[t._v("#")]),t._v(" 第一步：转换为二进制")]),t._v(" "),n("p",[t._v("整数和小数转二进制方法，可以点击 "),n("RouterLink",{attrs:{to:"/blog/computer/binary.html#十进制转二进制"}},[t._v("十进制转二进制")]),t._v(" 查看")],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0.0001100110011001100110011001100110011001100110011001101")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0.001100110011001100110011001100110011001100110011001101")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0.010011001100110011001100110011001100110011001100110011")]),t._v("\n")])])]),n("p",[t._v("统一用科学计数法表示为：\n"),n("img",{attrs:{src:a(492),alt:"0.1、0.2、0.3转二进制"}})]),t._v(" "),n("h4",{attrs:{id:"第二步-存储"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-存储"}},[t._v("#")]),t._v(" 第二步：存储")]),t._v(" "),n("p",[t._v("放入计算机中双精度浮点数存储，指数部分计算为 "),n("em",[n("strong",[t._v("指数+偏移量1023")])]),t._v("，最后的红色表示超过尾数位的二进制，即需要做舍0进1处理（截断时舍0进1，所以就产生了误差，一步差步步差，这就是精度丢失的本质）\n"),n("img",{attrs:{src:a(493),alt:"0.1、0.2、0.3存储"}}),t._v("\n最终64位双精度存储的二进制位如下表示：\n"),n("img",{attrs:{src:a(494),alt:"0.1、0.2、0.3存储"}})]),t._v(" "),n("h4",{attrs:{id:"第三步-计算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-计算"}},[t._v("#")]),t._v(" 第三步：计算")]),t._v(" "),n("p",[n("img",{attrs:{src:a(495),alt:"0.1、0.2、0.3存储"}}),t._v("\n此时可以看出 "),n("red",[t._v("0.1 + 0.2 !== 0.3")])],1),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0.1 + 0.2 === 0.30000000000000004")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0011001100110011001100110011001100110011001100110100")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.010011001100110011001100110011001100110011001100110100")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.30000000000000004")]),t._v("\n")])])]),n("h3",{attrs:{id:"解决方案-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-2"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("h4",{attrs:{id:"tofixed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tofixed"}},[t._v("#")]),t._v(" toFixed")]),t._v(" "),n("p",[t._v("在遇到浮点数运算后出现的精度问题时，如果需求仅仅只是保留2位小数，显示价格的话，刚开始我是想用toFixed(2)来解决的。因为"),n("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed#%E6%8F%8F%E8%BF%B0",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN"),n("OutboundLink")],1),t._v("中明确描述："),n("em",[n("strong",[t._v("toFixed() 方法返回一个表示 numObj 的字符串，但不使用指数计数法，并且小数点后有精确到 digits 位的数字。如果需要截断，则将数字四舍五入；如果小数位数不足，则小数部分用零填充，以使其具有指定长度")])]),t._v("。")]),t._v(" "),n("p",[t._v("但是在chrome中测试出现了奇葩结果：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.335")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.33 错误")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.345")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.34 错误")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.385")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.39 正确")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.395")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toFixed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.40 正确")]),t._v("\n")])])]),n("p",[t._v("所以，慎用"),n("code",[t._v("toFixed()")]),t._v("方法。")]),t._v(" "),n("h4",{attrs:{id:"化整数运算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#化整数运算"}},[t._v("#")]),t._v(" 化整数运算")]),t._v(" "),n("p",[t._v("该方法的主要思路就是把，小数转化为整数再进行计算。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 小数点后面保留第 n 位\n *\n * @param x 做近似处理的数\n * @param n 小数点后第 n 位\n * @returns 近似处理后的数 \n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundFractional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("思路：n则是要保留的小数，先扩大10^n，用Math.round把计算结果向上取证处理（想向下取证则使用Math.floor函数），然后除以10^n。")]),t._v(" "),n("p",[t._v("有了这个函数，那么我们要考虑的只剩下了在计算结果上保留几位小数的问题。加、减、乘、除计算变成下面的形式：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundFractional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("x"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("round")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundFractional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结果：0.3")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("roundFractional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结果：0.02")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 减法和除法依次类推，此处略掉两行")]),t._v("\n")])])]),n("h4",{attrs:{id:"bignumber-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bignumber-js"}},[t._v("#")]),t._v(" bignumber.js")]),t._v(" "),n("p",[t._v("目前前端领域有很多工具都可以解决精度丢失以及大数计算的问题，比如"),n("code",[t._v("number-precision")]),t._v("，"),n("code",[t._v("bigDecimal.js")]),t._v("，但是我们最常用的还是 "),n("a",{attrs:{href:"https://www.npmjs.com/package/bignumber.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("bignumber.js"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*** method **\n *  add / subtract / multiply /divide\n * floatObj.add(0.1, 0.2) >> 0.3\n * floatObj.multiply(19.9, 100) >> 1990\n *\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("floatObj")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     * 判断obj是否为一个整数\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isInteger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("obj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("floor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("obj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" obj\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     * 将一个浮点数转成整数，返回整数和倍数。如 3.14 >> 314，倍数是 100\n     * @param floatNum {number} 小数\n     * @return {object}\n     *   {times:100, num: 314}\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toInteger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("floatNum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ret "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("times")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("num")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isInteger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("floatNum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            ret"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" floatNum\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" strfi  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" floatNum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dotPos "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" strfi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" len    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" strfi"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dotPos"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" times  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("pow")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" intNum "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Number")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("floatNum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ret"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("times  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" times\n        ret"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" intNum\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n     * 核心方法，实现加减乘除运算，确保不丢失精度\n     * 思路：把小数放大为整数（乘），进行算术运算，再缩小为小数（除）\n     *\n     * @param a {number} 运算数1\n     * @param b {number} 运算数2\n     * @param digits {number} 精度，保留的小数点数，比如 2, 即保留为两位小数\n     * @param op {string} 运算类型，有加减乘除（add/subtract/multiply/divide）\n     *\n     */")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("operation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" op")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" o1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toInteger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" o2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toInteger")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" n2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("num\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("times\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" t2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" o2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("times\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" max "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" t2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" t2\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("op"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 两个小数位数相同")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" n2\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// o1 小数位 大于 o2")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" n2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// o1 小数位 小于 o2")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" n2\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" max\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subtract'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" n2\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" n2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" n2\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" max\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'multiply'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" t2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'divide'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                result "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" n2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" t1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加减乘除的四个接口")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("operation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'add'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("subtract")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("operation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subtract'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("multiply")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("operation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'multiply'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("divide")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("operation")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" digits"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'divide'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// exports")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" add"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subtract")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" subtract"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("multiply")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" multiply"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("divide")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" divide\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("大部分第三方库就是基于该方法进行封装，并且支持大数的处理。推荐使用。")]),t._v(" "),n("h2",{attrs:{id:"参考文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://blog.51cto.com/u_14562672/5802684",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS数字超限导致精度丢失问题原因及解决方案"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/6844903572979597319",target:"_blank",rel:"noopener noreferrer"}},[t._v("JS中浮点数精度问题"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.cn/post/7051103304780103716",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript的精度问题，包含原因和解决方案-面试总结"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=r.exports}}]);